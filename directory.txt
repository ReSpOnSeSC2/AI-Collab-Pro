ai-collaboration-hub-refactored/
├── public/
│   ├── css/
│   │   ├── main.css
│   │   ├── loading-progress.css
│   ├── js/
│   │   ├── auth.js           # Authentication handling
│   │   ├── uiManager.js
│   │   ├── connectionManager.js
│   │   ├── modelLoader.js
│   │   ├── authHandler.js
│   │   ├── mcpClient.js
│   │   ├── main.js
│   │   ├── layoutManager.js
│   │   ├── codePreviewManager.js
│   │   ├── loadingManager.fixed.js     # Fixed loading screen handling
│   │   ├── collaborationControls.js    # UI controls for collaboration modes
│   │   ├── collaborationLimits.js     # Timeout warnings and limits monitoring
│   │   ├── applySavedTheme.js          # Standalone theme handling
│   │   └── debugUtils.js
│   ├── config/
│   │   ├── models-claude.json
│   │   ├── models-gemini.json
│   │   ├── models-chatgpt.json
│   │   ├── models-grok.json
│   │   ├── models-deepseek.json
│   │   └── models-llama.json
│   ├── _header.html
│   ├── _footer.html
│   ├── index.html
│   ├── landing.html
│   ├── login.html
│   ├── signup.html
│   ├── model-comparison.html
│   └── admin-models.html
├── docs/
│   ├── API_Reference.md      # API endpoints documentation
│   ├── Architecture.md       # System architecture documentation
│   ├── CLI.md                # Omnicode CLI documentation
│   ├── Collaboration_Modes.md # Detailed description of collaboration modes
│   ├── Demo.md               # 30-minute demonstration script
│   ├── Development_Guide.md  # Guide for developers working on the codebase
│   ├── SECURITY.md           # Security architecture and practices
│   └── User_Guide.md         # End-user documentation
├── src/
│   ├── api/
│   │   ├── auth-routes.mjs    # New Passport.js authentication routes
│   │   ├── collaboration.mjs  # Will be updated for mode/style setting
│   │   ├── config.mjs
│   │   ├── index.mjs
│   │   ├── mcp.mjs
│   │   ├── responses.mjs
│   │   ├── status.mjs
│   │   └── upload.mjs
│   ├── config/
│   │   └── passport.mjs     # New Passport.js configuration
│   ├── lib/
│   │   ├── ai/
│   │   │   ├── claude.mjs
│   │   │   ├── gemini.mjs
│   │   │   ├── openaiClient.mjs
│   │   │   ├── collaboration.mjs  # MAJOR REFACTOR: Core orchestration logic with client validation
│   │   │   ├── collaboration.original.mjs  # Original collaboration implementation (backup)
│   │   │   ├── collaboration-improvements.mjs  # Enhanced collaboration with timeouts and concurrency control
│   │   │   ├── agent-response.mjs              # Enhanced API response handling with method compatibility
│   │   │   ├── parallel-collaboration.mjs      # Parallel execution implementation with client validation
│   │   │   ├── enhanced-collab-integration.mjs # Integration module with improved client handling
│   │   │   └── index.mjs
│   │   ├── billing/
│   │   │   └── costControl.mjs    # Cost estimation and tracking
│   │   ├── cliHandler.mjs
│   │   ├── messaging/
│   │   │   └── redis.mjs          # Real-time event streaming
│   │   ├── mcp/
│   │   │   └── index.mjs
│   │   └── security/
│   │       └── promptGuard.mjs    # Prompt injection protection
│   ├── wsHandler.mjs          # Will be updated to call new collaboration orchestrator
│   └── server.mjs
├── uploads/                   # For file uploads
├── responses/                 # For saved markdown responses
├── .env
├── package.json
├── install-collab-improvements.mjs  # Installation script for collab improvements
├── README.improvements.md          # Documentation for the improvements
└── PRD.md                     # This file